---
import { getCollection } from "astro:content";
import Layout from "~layouts/base.astro";
import BackLink from "~components/back-link";
import "~styles/text.css";
import "~styles/blog.css";

export async function getStaticPaths() {
   const blog = await getCollection("blog", ({ data }) => {
      return import.meta.env.PROD ? data.draft !== true : true;
   });

   return blog.map((entry) => ({
      params: { slug: entry.slug },
      props: { entry },
   }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Layout>
   <header slot="header" class="leading-none">
      <BackLink href="/blog" text="blog" client:load/>
   </header>

   <article>
      <Content />
   </article>
</Layout>
